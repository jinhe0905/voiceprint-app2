<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4fbea0">
    <meta name="description" content="声纹通 - 智能声纹车门解锁系统，提供安全便捷的车辆访问控制">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="声纹通">
    <title>声纹通 - 智能声纹车门解锁系统</title>
    <link rel="icon" href="./img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="./img/icons/icon-192x192.png">
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/login.css">
    <link rel="stylesheet" href="./css/mobile.css">
</head>
<body>
    <!-- 应用加载屏幕 -->
    <div class="app-loading">
        <img src="./img/logo.png" alt="声纹通" class="app-loading-logo">
        <div class="app-loading-spinner"></div>
        <div class="app-loading-text">声纹通</div>
        <div class="app-loading-subtext">正在加载应用...</div>
    </div>

    <div class="login-container">
        <!-- 左侧 - 应用信息 (在移动设备上将隐藏) -->
        <div class="login-left">
            <div class="login-decor-circle login-decor-circle-1"></div>
            <div class="login-decor-circle login-decor-circle-2"></div>
            <div class="login-decor-circle login-decor-circle-3"></div>
            
            <div class="login-app-info">
                <img src="./img/logo.png" alt="声纹通" class="login-logo">
                <h1 class="login-title">声纹通</h1>
                <p class="login-subtitle">智能声纹车门解锁系统</p>
            </div>
            
            <div class="login-showcase">
                <div class="login-showcase-ui">
                    <div class="login-showcase-header">
                        <div class="login-showcase-status">
                            <div class="login-showcase-user">
                                <i class="bi bi-person-circle"></i>
                                <span>用户已验证</span>
                            </div>
                            <div class="login-showcase-time">09:41</div>
                        </div>
                        <div class="login-showcase-vehicle">
                            <div class="login-showcase-car-name">林肯领航员</div>
                            <div class="login-showcase-car-status">已锁定</div>
                        </div>
                    </div>
                    <div class="login-showcase-body">
                        <div class="login-showcase-mic">
                            <div class="login-showcase-mic-icon">
                                <i class="bi bi-mic-fill"></i>
                            </div>
                            <div class="login-showcase-mic-text">语音验证中...</div>
                        </div>
                        <div class="login-showcase-waves">
                            <div class="login-showcase-wave"></div>
                            <div class="login-showcase-wave"></div>
                            <div class="login-showcase-wave"></div>
                            <div class="login-showcase-wave"></div>
                            <div class="login-showcase-wave"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="login-description">
                <h2>声纹解锁，简便安全</h2>
                <p>告别传统钥匙，使用您独特的声纹即可轻松解锁车门。声纹通采用先进的声纹识别技术，提供安全便捷的车辆访问控制。</p>
                <ul>
                    <li><i class="bi bi-shield-check"></i> 高级安全声纹验证</li>
                    <li><i class="bi bi-mic"></i> 语音指令控制车门</li>
                    <li><i class="bi bi-person-plus"></i> 多用户声纹管理</li>
                    <li><i class="bi bi-clock-history"></i> 便捷访问历史记录</li>
                </ul>
            </div>
        </div>

        <!-- 右侧 - 登录/注册表单 -->
        <div class="login-right">
            <!-- 移动设备logo展示 -->
            <div class="login-mobile-header">
                <img src="./img/logo.png" alt="声纹通" class="login-mobile-logo">
                <h1 class="login-mobile-title">声纹通</h1>
                <p class="login-mobile-subtitle">智能声纹车门解锁系统</p>
            </div>
            
            <div class="login-form-container">
                <div class="login-tabs">
                    <div class="login-tab active" data-tab="login">登录账号</div>
                    <div class="login-tab" data-tab="register">注册账号</div>
                </div>
                
                <!-- 登录表单 -->
                <div class="login-form active" id="login-form">
                    <div class="login-input-group">
                        <label for="login-phone">手机号码</label>
                        <div class="login-input-container">
                            <i class="bi bi-phone"></i>
                            <input type="tel" id="login-phone" placeholder="请输入手机号码" inputmode="tel">
                        </div>
                        <div class="login-input-error" id="login-phone-error"></div>
                    </div>
                    
                    <div class="login-input-group">
                        <label for="login-password">登录密码</label>
                        <div class="login-input-container">
                            <i class="bi bi-lock"></i>
                            <input type="password" id="login-password" placeholder="请输入密码">
                            <i class="bi bi-eye-slash toggle-password"></i>
                        </div>
                        <div class="login-input-error" id="login-password-error"></div>
                    </div>
                    
                    <div class="login-options">
                        <div class="login-remember">
                            <input type="checkbox" id="remember-me">
                            <label for="remember-me">记住我</label>
                        </div>
                        <a href="#" class="login-forgot">忘记密码？</a>
                    </div>
                    
                    <button class="login-button" id="login-submit">
                        <span class="login-button-text">登录</span>
                        <span class="login-button-loading">
                            <i class="bi bi-arrow-repeat spinning"></i>
                        </span>
                    </button>
                    
                    <div class="login-error" id="login-error"></div>
                    
                    <div class="login-divider">
                        <span>或</span>
                    </div>
                    
                    <div class="login-social">
                        <button class="login-social-button login-social-wechat">
                            <i class="bi bi-wechat"></i>
                            <span>微信登录</span>
                        </button>
                        <button class="login-social-button login-social-alipay">
                            <i class="bi bi-alipay"></i>
                            <span>支付宝登录</span>
                        </button>
                    </div>
                </div>
                
                <!-- 注册表单 -->
                <div class="login-form" id="register-form">
                    <div class="login-input-group">
                        <label for="register-phone">手机号码</label>
                        <div class="login-input-container">
                            <i class="bi bi-phone"></i>
                            <input type="tel" id="register-phone" placeholder="请输入手机号码" inputmode="tel">
                        </div>
                        <div class="login-input-error" id="register-phone-error"></div>
                    </div>
                    
                    <div class="login-input-group">
                        <label for="register-verification">验证码</label>
                        <div class="login-input-container verification-container">
                            <i class="bi bi-shield-lock"></i>
                            <input type="text" id="register-verification" placeholder="请输入验证码" inputmode="numeric">
                            <button class="verification-button" id="get-verification">获取验证码</button>
                        </div>
                        <div class="login-input-error" id="register-verification-error"></div>
                    </div>
                    
                    <div class="login-input-group">
                        <label for="register-password">设置密码</label>
                        <div class="login-input-container">
                            <i class="bi bi-lock"></i>
                            <input type="password" id="register-password" placeholder="请设置6-20位密码">
                            <i class="bi bi-eye-slash toggle-password"></i>
                        </div>
                        <div class="login-input-error" id="register-password-error"></div>
                    </div>
                    
                    <div class="login-input-group">
                        <label for="register-password-confirm">确认密码</label>
                        <div class="login-input-container">
                            <i class="bi bi-lock-fill"></i>
                            <input type="password" id="register-password-confirm" placeholder="请再次输入密码">
                            <i class="bi bi-eye-slash toggle-password"></i>
                        </div>
                        <div class="login-input-error" id="register-password-confirm-error"></div>
                    </div>
                    
                    <div class="login-agreement">
                        <input type="checkbox" id="register-agreement">
                        <label for="register-agreement">我已阅读并同意<a href="#">《用户协议》</a>和<a href="#">《隐私政策》</a></label>
                    </div>
                    
                    <button class="login-button" id="register-submit">
                        <span class="login-button-text">注册</span>
                        <span class="login-button-loading">
                            <i class="bi bi-arrow-repeat spinning"></i>
                        </span>
                    </button>
                    
                    <div class="login-error" id="register-error"></div>
                </div>
            </div>
            
            <div class="login-footer">
                <p>© 2025 声纹通智能科技有限公司 版权所有</p>
                <div class="login-footer-links">
                    <a href="#">关于我们</a>
                    <a href="#">联系我们</a>
                    <a href="#">帮助中心</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PWA安装提示 -->
    <div class="pwa-install-prompt" id="install-prompt">
        <div class="pwa-install-prompt-content">
            <div class="pwa-install-prompt-title">添加到主屏幕</div>
            <div class="pwa-install-prompt-desc">安装"声纹通"应用到您的设备以获得最佳体验</div>
        </div>
        <div class="pwa-install-prompt-buttons">
            <button class="pwa-install-prompt-close" id="install-prompt-close">稍后</button>
            <button class="pwa-install-prompt-install" id="install-prompt-add">安装</button>
        </div>
    </div>
    
    <!-- 离线指示器 -->
    <div class="offline-indicator" id="offline-indicator">
        <i class="bi bi-wifi-off"></i> 您当前处于离线状态
    </div>
    
    <script src="./js/login.js"></script>
    <script src="./js/mobile-optimizations.js"></script>
    <script>
        // 移除加载屏幕
        window.addEventListener('load', function() {
            setTimeout(function() {
                const loadingScreen = document.querySelector('.app-loading');
                if (loadingScreen) {
                    loadingScreen.style.opacity = '0';
                    setTimeout(function() {
                        loadingScreen.style.display = 'none';
                    }, 300);
                }
            }, 800);
        });
        
        // 处理PWA安装
        let deferredPrompt;
        const installPrompt = document.getElementById('install-prompt');
        const installButton = document.getElementById('install-prompt-add');
        const closePromptButton = document.getElementById('install-prompt-close');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            // 阻止Chrome 67及更早版本自动显示安装提示
            e.preventDefault();
            // 存储事件以便稍后触发
            deferredPrompt = e;
            // 延迟显示安装提示
            setTimeout(() => {
                if (installPrompt) installPrompt.classList.add('visible');
            }, 3000);
        });
        
        installButton.addEventListener('click', async () => {
            if (!deferredPrompt) return;
            
            // 显示安装提示
            deferredPrompt.prompt();
            // 等待用户响应
            const { outcome } = await deferredPrompt.userChoice;
            // 不再需要事件，清除
            deferredPrompt = null;
            // 隐藏提示
            installPrompt.classList.remove('visible');
        });
        
        closePromptButton.addEventListener('click', () => {
            installPrompt.classList.remove('visible');
        });
        
        // 监控在线状态
        function updateOnlineStatus() {
            const offlineIndicator = document.getElementById('offline-indicator');
            if (!navigator.onLine) {
                offlineIndicator.classList.add('visible');
            } else {
                offlineIndicator.classList.remove('visible');
            }
        }
        
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        
        // 初始状态检查
        updateOnlineStatus();
    </script>
</body>
</html> 